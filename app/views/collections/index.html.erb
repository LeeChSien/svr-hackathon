<div ng-controller="pageCtrl" class="collection-index">
  <div class="text-center">
    <img src="<%= current_user.avatar_url %>" class="img-circle" width="100" height="100">
  </div>
  <h3 class="text-center">
    <%= current_user.name %> 的收藏
  </h3>
  <hr>

  <div class="well col-md-2 col-sm-3" ng-repeat="collection in collections" ng-class="'slide-top'">
    <button type="button" class="close" ng-click="remove($index)"><span aria-hidden="true">&times;</span></button>
    <h3>{{collection.name}}</h3>
    <hr>

    <div class="dish" ng-repeat="dish in collection.dishes ">
      <div class="panel panel-default">
        <div class="panel-body">
          <a ng-href="/dishes/{{dish.id}}" class="dish-photo">
            <img src="" data-ng-src="{{dish.photo_url}}">
          </a>
          <div class="panel-info">
            <p class="dish-description">
              {{ dish.store_name }}
            <p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  var CurrentUser = <%= (current_user ? current_user.get_object : {}).to_json.html_safe %>;
  var Collections = <%= (current_user ? current_user.collections.map {|c| c.get_object} : []).to_json.html_safe %>;
</script>
